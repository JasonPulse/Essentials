{
    "$schema": "http://json-schema.org/draft-03/schema#",
    "title": "Essentials Configuration File Schema",
    "description": "",
    "type": "object",
    "properties": {
        "template": {
            "$ref": "#/BasicConfig",
            "required": true
        },
        "system_url": {
            "type": "string",
            "format": "uri",
            "qt-uri-protocols": [
                "https"
            ]
        },
        "system": {
            "$ref": "#/BasicConfig",
            "required": true
        },
        "template_url": {
            "type": "string",
            "format": "uri",
            "qt-uri-protocols": [
                "https"
            ]
        }
    },
    "BasicConfig": {
        "title": "Basic Config",
        "$id":"#/BasicConfig",
        "type": "object",
        "additionalProperties": true,
        "properties": {
            "devices": {
                "type": "array",
                "items": {
                    "$ref": "#/Device"
                }
            },
            "rooms": {
                "type": "array",
                "items": {
                    "$ref": "#/Room"
                }
            },
            "info": {
                "$ref": "#/Info"
            },
            "sourceLists": {
                "$ref": "#/SourceLists"
            }
        }
    },
    "Info": {
        "title": "Info",
        "type": "object",
        "additionalProperties": true,
        "properties": {
            "name": {
                "type": "string"
            },
            "date": {
                "type": "string",
                "format": "date-time"
            },
            "version": {
                "type": "string"
            },
            "runtimeInfo": {
                "$ref": "#/RuntimeInfo"
            },
            "comment": {
                "type": "string"
            },
            "hostname": {
                "type": "string"
            },
            "appNumber": {
                "type": "integer"
            },
            "lastModifiedDate": {
                "type": "string",
                "format": "date-time"
            },
            "lastUid": {
                "type": "integer"
            },
            "processorType": {
                "type": "string"
            },
            "systemType": {
                "type": "string"
            },
            "requiredControlSoftwareVersion": {
                "type": "string"
            }
        }
    },
    "RuntimeInfo": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "appName": {
                "type": "string"
            },
            "assemblyVersion": {
                "type": "string"
            },
            "osVersion": {
                "type": "string"
            }
        }
    },
    "Device": {
        "title": "Device",
        "type": "object",
        "additionalProperties": true,
        "properties": {
            "name": {
                "type": "string"
            },
            "group": {
                "required": true,
                "type": "string"
            },
            "properties": {
                "type": "object"
            },
            "uid": {
                "type": "integer"
            },
            "key": {
                "required": true,
                "type": "string"
            },
            "type": {
                "required": true,
                "type": "string"
            }
        }
    },
    "Room": {
        "title": "Room",
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "key": {
                "required": true,
                "type": "string"
            },
            "name": {
                "required": true,
                "type": "string"
            },
            "properties": {
                "required": true,
                "type": "object"
            },
            "type": {
                "required": true,
                "type": "string"
            }
        }
    },
    "SourceLists": {
        "title": "SourceLists",
        "type": "object",
        "additionalProperties": true,
        "properties": {
            "default": {
                "$ref": "#/SourceList"
            }
        }
    },
    "SourceList": {
        "title": "Source List",
        "type": "object",
        "additionalProperties": true,
        "properties": {}
    },
    "Source": {
        "title": "Source",
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "icon": {
                "type": "string"
            },
            "volumeControlKey": {
                "required": true,
                "type": "string"
            },
            "sourceKey": {
                "required": true,
                "type": "string"
            },
            "routeList": {
                "required": true,
                "type": "array",
                "items": {
                    "$ref": "#/RouteList"
                }
            },
            "includeInSourceList": {
                "required": true,
                "type": "boolean"
            },
            "type": {
                "required": true,
                "type": "string",
                "enum": [
                    "route",
                    "off",
                    "other"
                ]
            },
            "altIcon": {
                "type": "string"
            },
            "order": {
                "required": true,
                "type": "integer"
            },
            "disableCodecSharing": {
                "type": "boolean"
            }
        }
    },
    "RouteList": {
        "title": "RouteList",
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "destinationKey": {
                "required": true,
                "type": "string"
            },
            "sourceKey": {
                "required": true,
                "type": "string"
            },
            "type": {
                "required": true,
                "type": "string",
                "enum": [
                    "audio",
                    "video",
                    "audioVideo",
                    "usbOutput",
                    "usbInput"
                ]
            }
        }
    }
}